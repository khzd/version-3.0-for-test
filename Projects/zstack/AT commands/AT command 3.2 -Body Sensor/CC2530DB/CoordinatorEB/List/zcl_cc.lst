###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.3.10338/W32 for 8051         15/Jun/2015  20:13:28 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  S:\zigbee\Myzigbe\version 3.0 for new              #
#                          ZStack-CC2530-2.5.1a\Components\stack\zcl\zcl_cc.c #
#    Command line       =  -f "S:\zigbee\Myzigbe\version 3.0 for new          #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\Tools\CC #
#                          2530DB\f8wCoord.cfg" (-DCPU32MHZ                   #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK)    #
#                          -f "S:\zigbee\Myzigbe\version 3.0 for new          #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\Tools\CC #
#                          2530DB\f8wConfig.cfg" (-DZIGBEEPRO -DSECURE=0      #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0x2015                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 "S:\zigbee\Myzigbe\version  #
#                          3.0 for new ZStack-CC2530-2.5.1a\Components\stack\ #
#                          zcl\zcl_cc.c" -D ZIGBEEPRO -D NWK_AUTO_POLL -D     #
#                          HAL_UART=TRUE -D HOLD_AUTO_START -D NV_RESTORE -D  #
#                          REFLECTOR -D HAL_UART_ISR=1 -D HAL_UART_DMA=0 -D   #
#                          xHAL_UART_ISR_TX_MAX=200 -D xPOWER_SAVING -D       #
#                          ZCL_READ -D ZCL_WRITE -D ZCL_IDENTIFY -D           #
#                          ZCL_ON_OFF -D ZCL_DISCOVER -D xZTOOL_P1 -D         #
#                          xMT_TASK -D xMT_SYS_FUNC -D xMT_ZDO_FUNC -D        #
#                          xLCD_SUPPORTED=DEBUG -D xMT_UART_DEFAULT_OVERFLOW= #
#                          FALSE -lC "S:\zigbee\Myzigbe\version 3.0 for new   #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\CoordinatorEB\Lis #
#                          t\" -lA "S:\zigbee\Myzigbe\version 3.0 for new     #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\CoordinatorEB\Lis #
#                          t\" --diag_suppress Pe001,Pa010 -o                 #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\CoordinatorEB\Obj #
#                          \" -e --no_code_motion --debug --core=plain        #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "S:\zigbee\Myzigbe\version #
#                           3.0 for new ZStack-CC2530-2.5.1a\Projects\zstack\ #
#                          AT commands\AT command 3.2\CC2530DB\" -I           #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\Source\" -I    #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\ZMain\TI #
#                          2530DB\" -I "S:\zigbee\Myzigbe\version 3.0 for     #
#                          new ZStack-CC2530-2.5.1a\Projects\zstack\AT        #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\hal\include\" -I                          #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\hal\target\CC2530EB\" -I                  #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\mac\include\" -I                          #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\mac\high_level\" -I                       #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\mac\low_level\srf04\" -I                  #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\mac\low_level\srf04\single_chip\" -I      #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\mt\" -I "S:\zigbee\Myzigbe\version 3.0    #
#                          for new ZStack-CC2530-2.5.1a\Projects\zstack\AT    #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\osal\include\" -I                         #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\services\saddr\" -I                       #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\services\sdata\" -I                       #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\stack\af\" -I "S:\zigbee\Myzigbe\version  #
#                          3.0 for new ZStack-CC2530-2.5.1a\Projects\zstack\A #
#                          T commands\AT command 3.2\CC2530DB\..\..\..\..\..\ #
#                          Components\stack\nwk\" -I                          #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\stack\sapi\" -I                           #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\stack\sec\" -I "S:\zigbee\Myzigbe\version #
#                           3.0 for new ZStack-CC2530-2.5.1a\Projects\zstack\ #
#                          AT commands\AT command 3.2\CC2530DB\..\..\..\..\.. #
#                          \Components\stack\sys\" -I                         #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\stack\zdo\" -I "S:\zigbee\Myzigbe\version #
#                           3.0 for new ZStack-CC2530-2.5.1a\Projects\zstack\ #
#                          AT commands\AT command 3.2\CC2530DB\..\..\..\..\.. #
#                          \Components\stack\zcl\" -I                         #
#                          "S:\zigbee\Myzigbe\version 3.0 for new             #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\zmac\" -I "S:\zigbee\Myzigbe\version 3.0  #
#                          for new ZStack-CC2530-2.5.1a\Projects\zstack\AT    #
#                          commands\AT command 3.2\CC2530DB\..\..\..\..\..\Co #
#                          mponents\zmac\f8w\" -Ohz --require_prototypes      #
#    List file          =  S:\zigbee\Myzigbe\version 3.0 for new              #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\CoordinatorEB\Lis #
#                          t\zcl_cc.lst                                       #
#    Object file        =  S:\zigbee\Myzigbe\version 3.0 for new              #
#                          ZStack-CC2530-2.5.1a\Projects\zstack\AT            #
#                          commands\AT command 3.2\CC2530DB\CoordinatorEB\Obj #
#                          \zcl_cc.r51                                        #
#                                                                             #
#                                                                             #
###############################################################################

S:\zigbee\Myzigbe\version 3.0 for new ZStack-CC2530-2.5.1a\Components\stack\zcl\zcl_cc.c
      1          /**************************************************************************************************
      2            Filename:       zcl_cc.c
      3            Revised:        $Date: 2011-04-13 10:27:39 -0700 (Wed, 13 Apr 2011) $
      4            Revision:       $Revision: 25679 $
      5          
      6            Description:    Zigbee Cluster Library - Commissioning Cluster
      7          
      8          
      9            Copyright 2011 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED, 
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE, 
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com. 
     38          **************************************************************************************************/
     39          
     40          
     41          /*********************************************************************
     42           * INCLUDES
     43           */
     44          #include "ZComDef.h"
     45          #include "OSAL.h"
     46          #include "zcl.h"
     47          #include "zcl_general.h"
     48          #include "zcl_cc.h"
     49          
     50          #if defined ( INTER_PAN )
     51            #include "stub_aps.h"
     52          #endif
     53          
     54          /*********************************************************************
     55           * MACROS
     56           */
     57          
     58          /*********************************************************************
     59           * CONSTANTS
     60           */
     61          
     62          /*********************************************************************
     63           * TYPEDEFS
     64           */
     65          typedef struct zclCCCBRec
     66          {
     67            struct zclCCCBRec    *next;
     68            uint8                endpoint; // Used to link it into the endpoint descriptor
     69            zclCC_AppCallbacks_t *CBs;     // Pointer to Callback function
     70          } zclCCCBRec_t;
     71          
     72          /*********************************************************************
     73           * GLOBAL VARIABLES
     74           */
     75          
     76          /*********************************************************************
     77           * GLOBAL FUNCTIONS
     78           */
     79          
     80          /*********************************************************************
     81           * LOCAL VARIABLES
     82           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     83          static zclCCCBRec_t *zclCCCBs = (zclCCCBRec_t *)NULL;
   \                     zclCCCBs:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     84          static uint8 zclCCPluginRegisted = FALSE;
   \                     zclCCPluginRegisted:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     85          
     86          /*********************************************************************
     87           * LOCAL FUNCTIONS
     88           */
     89          
     90          /*
     91           * Callback from ZCL to process incoming Commands specific to this cluster library
     92           */
     93          static ZStatus_t zclCC_HdlIncoming(  zclIncoming_t *pInMsg );
     94          
     95          /* 
     96           * Function to process incoming Commands specific to this cluster library
     97           */
     98          static ZStatus_t zclCC_HdlInSpecificCommands( zclIncoming_t *pInMsg );
     99          
    100          /*
    101           * Process received Restart Device Command
    102           */
    103          static ZStatus_t zclCC_ProcessInCmd_RestartDevice( zclIncoming_t *pInMsg, zclCC_AppCallbacks_t *pCBs );
    104          
    105          /*
    106           * Process received Save Startup Parameters Command
    107           */
    108          static ZStatus_t zclCC_ProcessInCmd_SaveStartupParams( zclIncoming_t *pInMsg, zclCC_AppCallbacks_t *pCBs );
    109          
    110          /*
    111           * Process received Restore Startup Parameters Command
    112           */
    113          static ZStatus_t zclCC_ProcessInCmd_RestoreStartupParams( zclIncoming_t *pInMsg, zclCC_AppCallbacks_t *pCBs );
    114          
    115          /*
    116           * Process received Reset Startup Parameters Command
    117           */
    118          static ZStatus_t zclCC_ProcessInCmd_ResetStartupParams( zclIncoming_t *pInMsg, zclCC_AppCallbacks_t *pCBs );
    119          
    120          /*
    121           * Process received Restart Device Response
    122           */
    123          static ZStatus_t zclCC_ProcessInCmd_RestartDeviceRsp( zclIncoming_t *pInMsg, zclCC_AppCallbacks_t *pCBs );
    124          
    125          /*
    126           * Process received Save Startup Parameters Response
    127           */
    128          static ZStatus_t zclCC_ProcessInCmd_SaveStartupParamsRsp( zclIncoming_t *pInMsg, zclCC_AppCallbacks_t *pCBs );
    129          
    130          /*
    131           * Process received Restore Startup Parameters Response
    132           */
    133          static ZStatus_t zclCC_ProcessInCmd_RestoreStartupParamsRsp( zclIncoming_t *pInMsg, zclCC_AppCallbacks_t *pCBs );
    134          
    135          /*
    136           * Process received Reset Startup Parameters Response
    137           */
    138          static ZStatus_t zclCC_ProcessInCmd_ResetStartupParamsRsp( zclIncoming_t *pInMsg, zclCC_AppCallbacks_t *pCBs );
    139          
    140          
    141          /*********************************************************************
    142           * @fn      zclCC_RegisterCmdCallbacks
    143           *
    144           * @brief   Register an applications command callbacks
    145           *
    146           * @param   endpoint - application's endpoint
    147           * @param   callbacks - pointer to the callback record.
    148           *
    149           * @return  ZSuccess if successful. ZMemError if not able to allocate
    150           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    151          ZStatus_t zclCC_RegisterCmdCallbacks( uint8 endpoint, zclCC_AppCallbacks_t *callbacks )
   \                     zclCC_RegisterCmdCallbacks:
    152          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 0,R1
   \   000007   EA           MOV     A,R2
   \   000008   FE           MOV     R6,A
   \   000009   EB           MOV     A,R3
   \   00000A   FF           MOV     R7,A
    153            zclCCCBRec_t *pNewItem;
    154            zclCCCBRec_t *pLoop;
    155          
    156            // Register as a ZCL Plugin
    157            if ( !zclCCPluginRegisted )
   \   00000B   90....       MOV     DPTR,#zclCCPluginRegisted
   \   00000E   E0           MOVX    A,@DPTR
   \   00000F   7021         JNZ     ??zclCC_RegisterCmdCallbacks_0
    158            {
    159              zcl_registerPlugin( ZCL_CLUSTER_ID_GEN_COMMISSIONING,
    160                                  ZCL_CLUSTER_ID_GEN_COMMISSIONING,
    161                                  zclCC_HdlIncoming );
   \   000011                ; Setup parameters for call to function zcl_registerPlugin
   \   000011   75....       MOV     ?V0 + 2,#??zclCC_HdlIncoming?relay & 0xff
   \   000014   75....       MOV     ?V0 + 3,#(??zclCC_HdlIncoming?relay >> 8) & 0xff
   \   000017   78..         MOV     R0,#?V0 + 2
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00001C   7C15         MOV     R4,#0x15
   \   00001E   7D00         MOV     R5,#0x0
   \   000020   7A15         MOV     R2,#0x15
   \   000022   7B00         MOV     R3,#0x0
   \   000024   12....       LCALL   ??zcl_registerPlugin?relay
   \   000027   7402         MOV     A,#0x2
   \   000029   12....       LCALL   ?DEALLOC_XSTACK8
    162              zclCCPluginRegisted = TRUE;
   \   00002C   90....       MOV     DPTR,#zclCCPluginRegisted
   \   00002F   7401         MOV     A,#0x1
   \   000031   F0           MOVX    @DPTR,A
    163            }
    164          
    165            // Fill in the new profile list
    166            pNewItem = osal_mem_alloc( sizeof( zclCCCBRec_t ) );
   \                     ??zclCC_RegisterCmdCallbacks_0:
   \   000032                ; Setup parameters for call to function osal_mem_alloc
   \   000032   7A05         MOV     R2,#0x5
   \   000034   7B00         MOV     R3,#0x0
   \   000036   12....       LCALL   ??osal_mem_alloc?relay
   \   000039   8A..         MOV     ?V0 + 2,R2
   \   00003B   8B..         MOV     ?V0 + 3,R3
   \   00003D   A8..         MOV     R0,?V0 + 2
   \   00003F   A9..         MOV     R1,?V0 + 3
    167            if ( pNewItem == NULL )
   \   000041   E8           MOV     A,R0
   \   000042   49           ORL     A,R1
   \   000043   7004         JNZ     ??zclCC_RegisterCmdCallbacks_1
    168            {
    169              return ( ZMemError );
   \   000045   7910         MOV     R1,#0x10
   \   000047   8047         SJMP    ??zclCC_RegisterCmdCallbacks_2
    170            }
    171          
    172            pNewItem->next = (zclCCCBRec_t *)NULL;
   \                     ??zclCC_RegisterCmdCallbacks_1:
   \   000049   8882         MOV     DPL,R0
   \   00004B   8983         MOV     DPH,R1
   \   00004D   E4           CLR     A
   \   00004E   F0           MOVX    @DPTR,A
   \   00004F   A3           INC     DPTR
   \   000050   12....       LCALL   ?Subroutine10 & 0xFFFF
    173            pNewItem->endpoint = endpoint;
   \                     ??CrossCallReturnLabel_21:
   \   000053   A3           INC     DPTR
   \   000054   A3           INC     DPTR
   \   000055   E5..         MOV     A,?V0 + 0
   \   000057   12....       LCALL   ?Subroutine10 & 0xFFFF
    174            pNewItem->CBs = callbacks;
   \                     ??CrossCallReturnLabel_22:
   \   00005A   A3           INC     DPTR
   \   00005B   A3           INC     DPTR
   \   00005C   A3           INC     DPTR
   \   00005D   EE           MOV     A,R6
   \   00005E   F0           MOVX    @DPTR,A
   \   00005F   A3           INC     DPTR
   \   000060   EF           MOV     A,R7
   \   000061   F0           MOVX    @DPTR,A
    175          
    176            // Find spot in list
    177            if ( zclCCCBs == NULL )
   \   000062   90....       MOV     DPTR,#zclCCCBs
   \   000065   E0           MOVX    A,@DPTR
   \   000066   FA           MOV     R2,A
   \   000067   A3           INC     DPTR
   \   000068   E0           MOVX    A,@DPTR
   \   000069   FB           MOV     R3,A
   \   00006A   EA           MOV     A,R2
   \   00006B   4B           ORL     A,R3
   \   00006C   7008         JNZ     ??zclCC_RegisterCmdCallbacks_3
    178            {
    179              zclCCCBs = pNewItem;
   \   00006E   90....       MOV     DPTR,#zclCCCBs
   \   000071   8016         SJMP    ??zclCC_RegisterCmdCallbacks_4
    180            }
    181            else
    182            {
    183              // Look for end of list
    184              pLoop = zclCCCBs;
    185              while ( pLoop->next != NULL )
    186              {
    187                pLoop = pLoop->next;
   \                     ??zclCC_RegisterCmdCallbacks_5:
   \   000073   E0           MOVX    A,@DPTR
   \   000074   FA           MOV     R2,A
   \   000075   A3           INC     DPTR
   \                     ??zclCC_RegisterCmdCallbacks_3:
   \   000076   E0           MOVX    A,@DPTR
   \   000077   FB           MOV     R3,A
    188              }
   \   000078   8A82         MOV     DPL,R2
   \   00007A   8B83         MOV     DPH,R3
   \   00007C   E0           MOVX    A,@DPTR
   \   00007D   FC           MOV     R4,A
   \   00007E   A3           INC     DPTR
   \   00007F   E0           MOVX    A,@DPTR
   \   000080   FD           MOV     R5,A
   \   000081   EC           MOV     A,R4
   \   000082   4D           ORL     A,R5
   \   000083   8A82         MOV     DPL,R2
   \   000085   8B83         MOV     DPH,R3
   \   000087   70EA         JNZ     ??zclCC_RegisterCmdCallbacks_5
    189          
    190              // Put new item at end of list
    191              pLoop->next = pNewItem;
   \                     ??zclCC_RegisterCmdCallbacks_4:
   \   000089   E8           MOV     A,R0
   \   00008A   F0           MOVX    @DPTR,A
   \   00008B   A3           INC     DPTR
   \   00008C   E9           MOV     A,R1
   \   00008D   F0           MOVX    @DPTR,A
    192            }
    193          
    194            return ( ZSuccess );
   \   00008E   7900         MOV     R1,#0x0
   \                     ??zclCC_RegisterCmdCallbacks_2:
   \   000090   7F04         MOV     R7,#0x4
   \   000092   02....       LJMP    ?BANKED_LEAVE_XDATA
    195          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8882         MOV     DPL,R0
   \   000003   8983         MOV     DPH,R1
   \   000005   22           RET
    196          
    197          /*********************************************************************
    198           * @fn      zclCC_FindCallbacks
    199           *
    200           * @brief   Find the callbacks for an endpoint
    201           *
    202           * @param   endpoint
    203           *
    204           * @return  pointer to the callbacks
    205           */
    206          static zclCC_AppCallbacks_t *zclCC_FindCallbacks( uint8 endpoint )
    207          {
    208            zclCCCBRec_t *pCBs;
    209            
    210            pCBs = zclCCCBs;
    211            while ( pCBs != NULL )
    212            {
    213              if ( pCBs->endpoint == endpoint )
    214              {
    215                return ( pCBs->CBs );
    216              }
    217          
    218              pCBs = pCBs->next;
    219            }
    220          
    221            return ( (zclCC_AppCallbacks_t *)NULL );
    222          }
    223          
    224          /*********************************************************************
    225           * @fn      zclCC_HdlIncoming
    226           *
    227           * @brief   Callback from ZCL to process incoming Commands specific
    228           *          to this cluster library or Profile commands for attributes
    229           *          that aren't in the attribute list
    230           *
    231           * @param   pInMsg - pointer to the incoming message
    232           *
    233           * @return  ZStatus_t
    234           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    235          static ZStatus_t zclCC_HdlIncoming(  zclIncoming_t *pInMsg )
   \                     zclCC_HdlIncoming:
    236          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    237            ZStatus_t stat = ZSuccess;
    238          
    239          #if defined ( INTER_PAN )
    240            if ( StubAPS_InterPan( pInMsg->msg->srcAddr.panId, pInMsg->msg->srcAddr.endPoint ) )
    241            {
    242              return ( stat ); // Cluster not supported thru Inter-PAN
    243            }
    244          #endif
    245            if ( zcl_ClusterCmd( pInMsg->hdr.fc.type ) )
   \   000004   8A82         MOV     DPL,R2
   \   000006   8B83         MOV     DPH,R3
   \   000008   A3           INC     DPTR
   \   000009   A3           INC     DPTR
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   5403         ANL     A,#0x3
   \   00000D   6401         XRL     A,#0x1
   \   00000F   7010         JNZ     ??zclCC_HdlIncoming_0
    246            {
    247              // Is this a manufacturer specific command?
    248              if ( pInMsg->hdr.fc.manuSpecific == 0 ) 
   \   000011   8A82         MOV     DPL,R2
   \   000013   8B83         MOV     DPH,R3
   \   000015   A3           INC     DPTR
   \   000016   A3           INC     DPTR
   \   000017   E0           MOVX    A,@DPTR
   \   000018   5404         ANL     A,#0x4
   \   00001A   7005         JNZ     ??zclCC_HdlIncoming_0
    249              {
    250                stat = zclCC_HdlInSpecificCommands( pInMsg );
   \   00001C                ; Setup parameters for call to function zclCC_HdlInSpecificCommands
   \   00001C   12....       LCALL   ??zclCC_HdlInSpecificCommands?relay
   \   00001F   8002         SJMP    ??zclCC_HdlIncoming_1
    251              }
    252              else
    253              {
    254                // We don't support any manufacturer specific command.
    255                stat = ZFailure;
   \                     ??zclCC_HdlIncoming_0:
   \   000021   7901         MOV     R1,#0x1
    256              }
    257            }
    258            else
    259            {
    260              // Handle all the normal (Read, Write...) commands -- should never get here
    261              stat = ZFailure;
    262            }
    263          
    264            return ( stat );
   \                     ??zclCC_HdlIncoming_1:
   \   000023   D083         POP     DPH
   \   000025   D082         POP     DPL
   \   000027   02....       LJMP    ?BRET
    265          }
    266          
    267          /*********************************************************************
    268           * @fn      zclCC_HdlInSpecificCommands
    269           *
    270           * @brief   Function to process incoming Commands specific
    271           *          to this cluster library
    272          
    273           * @param   pInMsg - pointer to the incoming message
    274           *
    275           * @return  ZStatus_t
    276           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    277          static ZStatus_t zclCC_HdlInSpecificCommands( zclIncoming_t *pInMsg )
   \                     zclCC_HdlInSpecificCommands:
    278          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 6
   \   000005   74FA         MOV     A,#-0x6
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    279            ZStatus_t stat;
    280            zclCC_AppCallbacks_t *pCBs;
    281            
    282            // Make sure endpoint exists
    283            pCBs = zclCC_FindCallbacks( pInMsg->msg->endPoint );
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   8B83         MOV     DPH,R3
   \   00000E   E0           MOVX    A,@DPTR
   \   00000F   2414         ADD     A,#0x14
   \   000011   F8           MOV     R0,A
   \   000012   A3           INC     DPTR
   \   000013   E0           MOVX    A,@DPTR
   \   000014   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_29:
   \   000017   90....       MOV     DPTR,#zclCCCBs
   \                     ??zclCC_HdlInSpecificCommands_0:
   \   00001A   12....       LCALL   ??Subroutine20_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_37:
   \   00001D   601A         JZ      ??zclCC_HdlInSpecificCommands_1
   \   00001F   8882         MOV     DPL,R0
   \   000021   8983         MOV     DPH,R1
   \   000023   A3           INC     DPTR
   \   000024   A3           INC     DPTR
   \   000025   E0           MOVX    A,@DPTR
   \   000026   6C           XRL     A,R4
   \   000027   8882         MOV     DPL,R0
   \   000029   8983         MOV     DPH,R1
   \   00002B   70ED         JNZ     ??zclCC_HdlInSpecificCommands_0
   \   00002D   A3           INC     DPTR
   \   00002E   A3           INC     DPTR
   \   00002F   A3           INC     DPTR
   \   000030   E0           MOVX    A,@DPTR
   \   000031   FE           MOV     R6,A
   \   000032   A3           INC     DPTR
   \   000033   E0           MOVX    A,@DPTR
   \   000034   FF           MOV     R7,A
    284            if ( pCBs == NULL )
   \   000035   EE           MOV     A,R6
   \   000036   4F           ORL     A,R7
   \   000037   7005         JNZ     ??zclCC_HdlInSpecificCommands_2
    285            {
    286              return ( ZFailure );
   \                     ??zclCC_HdlInSpecificCommands_1:
   \   000039   7901         MOV     R1,#0x1
   \   00003B   02....       LJMP    ??zclCC_HdlInSpecificCommands_3 & 0xFFFF
    287            }
    288          
    289            if ( zcl_ServerCmd( pInMsg->hdr.fc.direction ) )  
   \                     ??zclCC_HdlInSpecificCommands_2:
   \   00003E   8A82         MOV     DPL,R2
   \   000040   8B83         MOV     DPH,R3
   \   000042   A3           INC     DPTR
   \   000043   A3           INC     DPTR
   \   000044   E0           MOVX    A,@DPTR
   \   000045   5408         ANL     A,#0x8
   \   000047   8A82         MOV     DPL,R2
   \   000049   8B83         MOV     DPH,R3
   \   00004B   A3           INC     DPTR
   \   00004C   A3           INC     DPTR
   \   00004D   A3           INC     DPTR
   \   00004E   A3           INC     DPTR
   \   00004F   A3           INC     DPTR
   \   000050   A3           INC     DPTR
   \   000051   A3           INC     DPTR
   \   000052   6003         JZ      $+5
   \   000054   02....       LJMP    ??zclCC_HdlInSpecificCommands_4 & 0xFFFF
    290            {
    291              // Process Client commands, received by server
    292              switch ( pInMsg->hdr.commandID )
   \   000057   E0           MOVX    A,@DPTR
   \   000058   6011         JZ      ??zclCC_HdlInSpecificCommands_5
   \   00005A   14           DEC     A
   \   00005B   6066         JZ      ??zclCC_HdlInSpecificCommands_6
   \   00005D   14           DEC     A
   \   00005E   7003         JNZ     $+5
   \   000060   02....       LJMP    ??zclCC_HdlInSpecificCommands_7 & 0xFFFF
   \   000063   14           DEC     A
   \   000064   7003         JNZ     $+5
   \   000066   02....       LJMP    ??zclCC_HdlInSpecificCommands_8 & 0xFFFF
   \   000069   80CE         SJMP    ??zclCC_HdlInSpecificCommands_1
    293              {
    294                case COMMAND_CC_RESTART_DEVICE:
    295                  stat = zclCC_ProcessInCmd_RestartDevice( pInMsg, pCBs );
   \                     ??zclCC_HdlInSpecificCommands_5:
   \   00006B   8E82         MOV     DPL,R6
   \   00006D   8F83         MOV     DPH,R7
   \   00006F   12....       LCALL   ??Subroutine20_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_38:
   \   000072   60C5         JZ      ??zclCC_HdlInSpecificCommands_1
   \   000074   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   000077   C0E0         PUSH    A
   \   000079   7403         MOV     A,#0x3
   \   00007B   12....       LCALL   ?XSTACK_DISP0_8
   \   00007E   D0E0         POP     A
   \   000080   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_23:
   \   000083   E0           MOVX    A,@DPTR
   \   000084   FC           MOV     R4,A
   \   000085   A3           INC     DPTR
   \   000086   E0           MOVX    A,@DPTR
   \   000087   F583         MOV     DPH,A
   \   000089   8C82         MOV     DPL,R4
   \   00008B   A3           INC     DPTR
   \   00008C   E0           MOVX    A,@DPTR
   \   00008D   C0E0         PUSH    A
   \   00008F   7404         MOV     A,#0x4
   \   000091   12....       LCALL   ?XSTACK_DISP0_8
   \   000094   D0E0         POP     A
   \   000096   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_24:
   \   000099   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   00009C   A3           INC     DPTR
   \   00009D   A3           INC     DPTR
   \   00009E   E0           MOVX    A,@DPTR
   \   00009F   C0E0         PUSH    A
   \   0000A1   7405         MOV     A,#0x5
   \   0000A3   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A6   D0E0         POP     A
   \   0000A8   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_27:
   \   0000AB   7403         MOV     A,#0x3
   \   0000AD   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B0   AA82         MOV     R2,DPL
   \   0000B2   AB83         MOV     R3,DPH
   \   0000B4   8E82         MOV     DPL,R6
   \   0000B6   8F83         MOV     DPH,R7
   \                     ??zclCC_HdlInSpecificCommands_9:
   \   0000B8   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   0000BB   12....       LCALL   ?CALL_IND
   \   0000BE   79FF         MOV     R1,#-0x1
   \   0000C0   02....       LJMP    ??zclCC_HdlInSpecificCommands_3 & 0xFFFF
    296                  break;
    297          
    298                case COMMAND_CC_SAVE_STARTUP_PARAMS:
    299                  stat = zclCC_ProcessInCmd_SaveStartupParams( pInMsg, pCBs );
   \                     ??zclCC_HdlInSpecificCommands_6:
   \   0000C3   8E82         MOV     DPL,R6
   \   0000C5   8F83         MOV     DPH,R7
   \   0000C7   12....       LCALL   ??Subroutine19_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   0000CA   7003         JNZ     $+5
   \   0000CC   02....       LJMP    ??zclCC_HdlInSpecificCommands_1 & 0xFFFF
   \   0000CF   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   0000D2   C0E0         PUSH    A
   \   0000D4   7401         MOV     A,#0x1
   \   0000D6   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D9   D0E0         POP     A
   \   0000DB   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_11:
   \   0000DE   C0E0         PUSH    A
   \   0000E0   7402         MOV     A,#0x2
   \   0000E2   12....       LCALL   ?XSTACK_DISP0_8
   \   0000E5   D0E0         POP     A
   \   0000E7   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_4:
   \   0000EA   12....       LCALL   ?XSTACK_DISP0_8
   \   0000ED   AA82         MOV     R2,DPL
   \   0000EF   AB83         MOV     R3,DPH
   \   0000F1   8E82         MOV     DPL,R6
   \   0000F3   8F83         MOV     DPH,R7
   \                     ??zclCC_HdlInSpecificCommands_10:
   \   0000F5   A3           INC     DPTR
   \   0000F6   A3           INC     DPTR
   \   0000F7   80BF         SJMP    ??zclCC_HdlInSpecificCommands_9
    300                  break;
    301          
    302                case COMMAND_CC_RESTORE_STARTUP_PARAMS:
    303                  stat = zclCC_ProcessInCmd_RestoreStartupParams( pInMsg, pCBs );
   \                     ??zclCC_HdlInSpecificCommands_7:
   \   0000F9   8E82         MOV     DPL,R6
   \   0000FB   8F83         MOV     DPH,R7
   \   0000FD   12....       LCALL   ??Subroutine18_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   000100   7003         JNZ     $+5
   \   000102   02....       LJMP    ??zclCC_HdlInSpecificCommands_1 & 0xFFFF
   \   000105   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_9:
   \   000108   C0E0         PUSH    A
   \   00010A   7401         MOV     A,#0x1
   \   00010C   12....       LCALL   ?XSTACK_DISP0_8
   \   00010F   D0E0         POP     A
   \   000111   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_12:
   \   000114   C0E0         PUSH    A
   \   000116   7402         MOV     A,#0x2
   \   000118   12....       LCALL   ?XSTACK_DISP0_8
   \   00011B   D0E0         POP     A
   \   00011D   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   000120   12....       LCALL   ?XSTACK_DISP0_8
   \   000123   AA82         MOV     R2,DPL
   \   000125   AB83         MOV     R3,DPH
   \   000127   8E82         MOV     DPL,R6
   \   000129   8F83         MOV     DPH,R7
   \                     ??zclCC_HdlInSpecificCommands_11:
   \   00012B   A3           INC     DPTR
   \   00012C   A3           INC     DPTR
   \   00012D   80C6         SJMP    ??zclCC_HdlInSpecificCommands_10
    304                  break;
    305          
    306                case COMMAND_CC_RESET_STARTUP_PARAMS:
    307                  stat = zclCC_ProcessInCmd_ResetStartupParams( pInMsg, pCBs );
   \                     ??zclCC_HdlInSpecificCommands_8:
   \   00012F   8E82         MOV     DPL,R6
   \   000131   8F83         MOV     DPH,R7
   \   000133   12....       LCALL   ??Subroutine17_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_43:
   \   000136   602A         JZ      ??zclCC_HdlInSpecificCommands_12
   \   000138   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_10:
   \   00013B   C0E0         PUSH    A
   \   00013D   7401         MOV     A,#0x1
   \   00013F   12....       LCALL   ?XSTACK_DISP0_8
   \   000142   D0E0         POP     A
   \   000144   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_13:
   \   000147   C0E0         PUSH    A
   \   000149   7402         MOV     A,#0x2
   \   00014B   12....       LCALL   ?XSTACK_DISP0_8
   \   00014E   D0E0         POP     A
   \   000150   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   000153   12....       LCALL   ?XSTACK_DISP0_8
   \   000156   AA82         MOV     R2,DPL
   \   000158   AB83         MOV     R3,DPH
   \   00015A   8E82         MOV     DPL,R6
   \   00015C   8F83         MOV     DPH,R7
   \   00015E   A3           INC     DPTR
   \   00015F   A3           INC     DPTR
   \   000160   80C9         SJMP    ??zclCC_HdlInSpecificCommands_11
    308                  break;
    309          
    310                default:
    311                  stat = ZFailure;
   \                     ??zclCC_HdlInSpecificCommands_12:
   \   000162   02....       LJMP    ??zclCC_HdlInSpecificCommands_1 & 0xFFFF
    312                  break;
    313              }
    314            }
    315            else
    316            {
    317              switch ( pInMsg->hdr.commandID )
   \                     ??zclCC_HdlInSpecificCommands_4:
   \   000165   E0           MOVX    A,@DPTR
   \   000166   600B         JZ      ??zclCC_HdlInSpecificCommands_13
   \   000168   14           DEC     A
   \   000169   601E         JZ      ??zclCC_HdlInSpecificCommands_14
   \   00016B   14           DEC     A
   \   00016C   6030         JZ      ??zclCC_HdlInSpecificCommands_15
   \   00016E   14           DEC     A
   \   00016F   6046         JZ      ??zclCC_HdlInSpecificCommands_16
   \   000171   80EF         SJMP    ??zclCC_HdlInSpecificCommands_12
    318              {
    319                case COMMAND_CC_RESTART_DEVICE_RSP:
    320                  stat = zclCC_ProcessInCmd_RestartDeviceRsp( pInMsg, pCBs );
   \                     ??zclCC_HdlInSpecificCommands_13:
   \   000173   8E82         MOV     DPL,R6
   \   000175   8F83         MOV     DPH,R7
   \   000177   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_44:
   \   00017A   60E6         JZ      ??zclCC_HdlInSpecificCommands_12
   \   00017C   12....       LCALL   ?Subroutine1 & 0xFFFF
   \                     ??CrossCallReturnLabel_0:
   \   00017F   A3           INC     DPTR
   \   000180   A3           INC     DPTR
   \   000181   A3           INC     DPTR
   \   000182   A3           INC     DPTR
   \   000183   A3           INC     DPTR
   \   000184   A3           INC     DPTR
   \   000185   A3           INC     DPTR
   \   000186   A3           INC     DPTR
   \   000187   804C         SJMP    ??zclCC_HdlInSpecificCommands_17
    321                  break;
    322          
    323                case COMMAND_CC_SAVE_STARTUP_PARAMS_RSP:
    324                  stat = zclCC_ProcessInCmd_SaveStartupParamsRsp( pInMsg, pCBs );
   \                     ??zclCC_HdlInSpecificCommands_14:
   \   000189   8E82         MOV     DPL,R6
   \   00018B   8F83         MOV     DPH,R7
   \   00018D   A3           INC     DPTR
   \   00018E   A3           INC     DPTR
   \   00018F   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_45:
   \   000192   7003         JNZ     $+5
   \   000194   02....       LJMP    ??zclCC_HdlInSpecificCommands_1 & 0xFFFF
   \   000197   12....       LCALL   ?Subroutine1 & 0xFFFF
   \                     ??CrossCallReturnLabel_1:
   \   00019A   A3           INC     DPTR
   \   00019B   A3           INC     DPTR
   \   00019C   80E1         SJMP    ??CrossCallReturnLabel_0
    325                  break;
    326          
    327                case COMMAND_CC_RESTORE_STARTUP_PARAMS_RSP:
    328                  stat = zclCC_ProcessInCmd_RestoreStartupParamsRsp( pInMsg, pCBs );
   \                     ??zclCC_HdlInSpecificCommands_15:
   \   00019E   EE           MOV     A,R6
   \   00019F   240C         ADD     A,#0xc
   \   0001A1   F582         MOV     DPL,A
   \   0001A3   EF           MOV     A,R7
   \   0001A4   3400         ADDC    A,#0x0
   \   0001A6   F583         MOV     DPH,A
   \   0001A8   12....       LCALL   ??Subroutine20_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_39:
   \   0001AB   7003         JNZ     $+5
   \   0001AD   02....       LJMP    ??zclCC_HdlInSpecificCommands_1 & 0xFFFF
   \   0001B0   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_2:
   \   0001B3   240C         ADD     A,#0xc
   \   0001B5   8017         SJMP    ??zclCC_HdlInSpecificCommands_18
    329                  break;
    330          
    331                case COMMAND_CC_RESET_STARTUP_PARAMS_RSP:
    332                  stat = zclCC_ProcessInCmd_ResetStartupParamsRsp( pInMsg, pCBs );
   \                     ??zclCC_HdlInSpecificCommands_16:
   \   0001B7   EE           MOV     A,R6
   \   0001B8   240E         ADD     A,#0xe
   \   0001BA   F582         MOV     DPL,A
   \   0001BC   EF           MOV     A,R7
   \   0001BD   3400         ADDC    A,#0x0
   \   0001BF   F583         MOV     DPH,A
   \   0001C1   12....       LCALL   ??Subroutine20_0 & 0xFFFF
    333                  break;
    334          
    335                default:
    336                  stat = ZFailure;
    337                  break;
    338              }
    339            }
   \                     ??CrossCallReturnLabel_40:
   \   0001C4   7003         JNZ     $+5
   \   0001C6   02....       LJMP    ??zclCC_HdlInSpecificCommands_1 & 0xFFFF
   \   0001C9   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   0001CC   240E         ADD     A,#0xe
   \                     ??zclCC_HdlInSpecificCommands_18:
   \   0001CE   F582         MOV     DPL,A
   \   0001D0   EF           MOV     A,R7
   \   0001D1   3400         ADDC    A,#0x0
   \   0001D3   F583         MOV     DPH,A
   \                     ??zclCC_HdlInSpecificCommands_17:
   \   0001D5   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   0001D8   12....       LCALL   ?CALL_IND
   \   0001DB   7900         MOV     R1,#0x0
    340           
    341            return ( stat );
   \                     ??zclCC_HdlInSpecificCommands_3:
   \   0001DD   7406         MOV     A,#0x6
   \   0001DF   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001E2   7F01         MOV     R7,#0x1
   \   0001E4   02....       LJMP    ?BANKED_LEAVE_XDATA
    342          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_32:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_36:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F583         MOV     DPH,A
   \   000006   8882         MOV     DPL,R0
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8882         MOV     DPL,R0
   \   000003   8983         MOV     DPH,R1
   \   000005   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_31:
   \   000008   A3           INC     DPTR
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   EA           MOV     A,R2
   \   000001   2408         ADD     A,#0x8
   \   000003   F8           MOV     R0,A
   \   000004   EB           MOV     A,R3
   \   000005   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_30:
   \   000008   A3           INC     DPTR
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   F583         MOV     DPH,A
   \   00000C   8C82         MOV     DPL,R4
   \   00000E   E0           MOVX    A,@DPTR
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F9           MOV     R1,A
   \   000003   8882         MOV     DPL,R0
   \   000005   8983         MOV     DPH,R1
   \   000007   E0           MOVX    A,@DPTR
   \   000008   FC           MOV     R4,A
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_28:
   \   000003   7401         MOV     A,#0x1
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_34:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   F0           MOVX    @DPTR,A
   \   000001                ; Setup parameters for indirect call
   \   000001                ; Setup parameters for indirect call
   \   000001                ; Setup parameters for indirect call
   \   000001                ; Setup parameters for indirect call
   \   000001                ; Setup parameters for indirect call
   \   000001                ; Setup parameters for indirect call
   \   000001                ; Setup parameters for indirect call
   \   000001                ; Setup parameters for indirect call
   \   000001   8A82         MOV     DPL,R2
   \   000003   8B83         MOV     DPH,R3
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008   A3           INC     DPTR
   \   000009   A3           INC     DPTR
   \   00000A   A3           INC     DPTR
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   F9           MOV     R1,A
   \   00000D   8A82         MOV     DPL,R2
   \   00000F   8B83         MOV     DPH,R3
   \   000011   E0           MOVX    A,@DPTR
   \   000012   2406         ADD     A,#0x6
   \   000014   FC           MOV     R4,A
   \   000015   A3           INC     DPTR
   \   000016   E0           MOVX    A,@DPTR
   \   000017   3400         ADDC    A,#0x0
   \   000019   FD           MOV     R5,A
   \   00001A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   A3           INC     DPTR
   \   000001   A3           INC     DPTR
   \   000002                REQUIRE ??Subroutine17_0
   \   000002                ; // Fall through to label ??Subroutine17_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine17_0:
   \   000000   A3           INC     DPTR
   \   000001   A3           INC     DPTR
   \   000002                REQUIRE ??Subroutine18_0
   \   000002                ; // Fall through to label ??Subroutine18_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine18_0:
   \   000000   A3           INC     DPTR
   \   000001   A3           INC     DPTR
   \   000002                REQUIRE ??Subroutine19_0
   \   000002                ; // Fall through to label ??Subroutine19_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine19_0:
   \   000000   A3           INC     DPTR
   \   000001   A3           INC     DPTR
   \   000002                REQUIRE ??Subroutine20_0
   \   000002                ; // Fall through to label ??Subroutine20_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine20_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   E8           MOV     A,R0
   \   000006   49           ORL     A,R1
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   12....       LCALL   ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_26:
   \   000003   EE           MOV     A,R6
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   12....       LCALL   ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_25:
   \   000003   8E82         MOV     DPL,R6
   \   000005   8F83         MOV     DPH,R7
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   A3           INC     DPTR
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008   A3           INC     DPTR
   \   000009   A3           INC     DPTR
   \   00000A   A3           INC     DPTR
   \   00000B   A3           INC     DPTR
   \   00000C   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_35:
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   85..82       MOV     DPL,?XSP + 0
   \   000013   85..83       MOV     DPH,?XSP + 1
   \   000016   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_33:
   \   000019   85..82       MOV     DPL,?XSP + 0
   \   00001C   85..83       MOV     DPH,?XSP + 1
   \   00001F   AA82         MOV     R2,DPL
   \   000021   AB83         MOV     R3,DPH
   \   000023   22           RET
    343          
    344          /*********************************************************************
    345           * @fn      zclCC_ProcessInCmd_RestartDevice
    346           *
    347           * @brief   Process in the received Restart Device Command.
    348           *
    349           * @param   pInMsg - pointer to the incoming message
    350           * @param   pCBs - pointer to the Application callback
    351           *
    352           * @return  ZStatus_t - status of the command processing                
    353           */
    354          static ZStatus_t zclCC_ProcessInCmd_RestartDevice( zclIncoming_t *pInMsg, 
    355                                                             zclCC_AppCallbacks_t *pCBs )
    356          {
    357            if ( pCBs->pfnRestart_Device )
    358            {
    359              zclCCRestartDevice_t cmd;
    360          
    361              cmd.options = pInMsg->pData[0];
    362              cmd.delay = pInMsg->pData[1];
    363              cmd.jitter = pInMsg->pData[2];
    364          
    365              pCBs->pfnRestart_Device( &cmd, &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
    366          
    367              return ZCL_STATUS_CMD_HAS_RSP;
    368            }
    369          
    370            return ZFailure;
    371          }
    372          
    373          /*********************************************************************
    374           * @fn      zclCC_ProcessInCmd_SaveStartupParams
    375           *
    376           * @brief   Process in the received Save Startup Parameters Command.
    377           *
    378           * @param   pInMsg - pointer to the incoming message
    379           * @param   pCBs - pointer to the Application callback
    380           *
    381           * @return  ZStatus_t - status of the command processing                     
    382           */
    383          static ZStatus_t zclCC_ProcessInCmd_SaveStartupParams( zclIncoming_t *pInMsg, 
    384                                                                 zclCC_AppCallbacks_t *pCBs )
    385          {
    386            if ( pCBs->pfnSave_StartupParams )
    387            {
    388              zclCCStartupParams_t cmd;
    389          
    390              cmd.options = pInMsg->pData[0];
    391              cmd.index = pInMsg->pData[1];
    392          
    393              pCBs->pfnSave_StartupParams( &cmd, &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
    394          
    395              return ZCL_STATUS_CMD_HAS_RSP;
    396            }
    397          
    398            return ZFailure;
    399          }
    400          
    401          /*********************************************************************
    402           * @fn      zclCC_ProcessInCmd_RestoreStartupParams
    403           *
    404           * @brief   Process in the received Restore Startup Parameters Command.
    405           *
    406           * @param   pInMsg - pointer to the incoming message
    407           * @param   pCBs - pointer to the Application callback
    408           *
    409           * @return  ZStatus_t - status of the command processing                   
    410           */
    411          static ZStatus_t zclCC_ProcessInCmd_RestoreStartupParams( zclIncoming_t *pInMsg,
    412                                                                    zclCC_AppCallbacks_t *pCBs )
    413          {
    414            if ( pCBs->pfnRestore_StartupParams )
    415            {
    416              zclCCStartupParams_t cmd;
    417          
    418              cmd.options = pInMsg->pData[0];
    419              cmd.index = pInMsg->pData[1];
    420          
    421              pCBs->pfnRestore_StartupParams( &cmd, &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
    422          
    423              return ZCL_STATUS_CMD_HAS_RSP;
    424            }
    425          
    426            return ZFailure;
    427          }
    428          
    429          /*********************************************************************
    430           * @fn      zclCC_ProcessInCmd_ResetStartupParams
    431           *
    432           * @brief   Process in the received Reset Startup Parameters Command.
    433           *
    434           * @param   pInMsg - pointer to the incoming message
    435           * @param   pCBs - pointer to the Application callback
    436           *
    437           * @return  ZStatus_t - status of the command processing                    
    438           */
    439          static ZStatus_t zclCC_ProcessInCmd_ResetStartupParams( zclIncoming_t *pInMsg,
    440                                                                  zclCC_AppCallbacks_t *pCBs )
    441          {
    442            if ( pCBs->pfnReset_StartupParams )
    443            {
    444              zclCCStartupParams_t cmd;
    445          
    446              cmd.options = pInMsg->pData[0];
    447              cmd.index = pInMsg->pData[1];
    448          
    449              pCBs->pfnReset_StartupParams( &cmd, &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
    450          
    451              return ZCL_STATUS_CMD_HAS_RSP;
    452            }
    453          
    454            return ZFailure; 
    455          }
    456          
    457          /*********************************************************************
    458           * @fn      zclCC_ProcessInCmd_RestartDeviceRsp
    459           *
    460           * @brief   Process in the received Restart Device Response
    461           *
    462           * @param   pInMsg - pointer to the incoming message
    463           * @param   pCBs - pointer to the Application callback
    464           *
    465           * @return  ZStatus_t - status of the command processing                    
    466           */
    467          static ZStatus_t zclCC_ProcessInCmd_RestartDeviceRsp( zclIncoming_t *pInMsg,
    468                                                                zclCC_AppCallbacks_t *pCBs )
    469          {
    470            if ( pCBs->pfnRestart_DeviceRsp )
    471            {
    472              zclCCServerParamsRsp_t rsp;
    473          
    474              rsp.status = pInMsg->pData[0];
    475          
    476              pCBs->pfnRestart_DeviceRsp( &rsp, &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
    477          
    478              return ZSuccess;
    479            }
    480          
    481            return ZFailure; 
    482          }
    483          
    484          /*********************************************************************
    485           * @fn      zclCC_ProcessInCmd_SaveStartupParamsRsp
    486           *
    487           * @brief   Process in the received Save Startup Parameters Response
    488           *
    489           * @param   pInMsg - pointer to the incoming message
    490           * @param   pCBs - pointer to the Application callback
    491           *
    492           * @return  ZStatus_t - status of the command processing                 
    493           */
    494          static ZStatus_t zclCC_ProcessInCmd_SaveStartupParamsRsp( zclIncoming_t *pInMsg,
    495                                                                    zclCC_AppCallbacks_t *pCBs )
    496          {
    497            if ( pCBs->pfnSave_StartupParamsRsp )
    498            {
    499              zclCCServerParamsRsp_t rsp;
    500          
    501              rsp.status = pInMsg->pData[0];
    502          
    503              pCBs->pfnSave_StartupParamsRsp( &rsp, &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
    504          
    505              return ZSuccess;
    506            }
    507          
    508            return ZFailure; 
    509          }
    510          
    511          /*********************************************************************
    512           * @fn      zclCC_ProcessInCmd_RestoreStartupParamsRsp
    513           *
    514           * @brief   Process in the received Restore Startup Parameters Response
    515           *
    516           * @param   pInMsg - pointer to the incoming message
    517           * @param   pCBs - pointer to the Application callback
    518           *
    519           * @return  ZStatus_t - status of the command processing                  
    520           */
    521          static ZStatus_t zclCC_ProcessInCmd_RestoreStartupParamsRsp( zclIncoming_t *pInMsg,
    522                                                                       zclCC_AppCallbacks_t *pCBs )
    523          {
    524            if ( pCBs->pfnRestore_StartupParamsRsp )
    525            {
    526              zclCCServerParamsRsp_t rsp;
    527          
    528              rsp.status = pInMsg->pData[0];
    529          
    530              pCBs->pfnRestore_StartupParamsRsp( &rsp, &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
    531          
    532              return ZSuccess;
    533            }
    534          
    535            return ZFailure; 
    536          }
    537          
    538          /*********************************************************************
    539           * @fn      zclCC_ProcessInCmd_ResetStartupParamsRsp
    540           *
    541           * @brief   Process in the received Reset Startup Parameters Response
    542           *
    543           * @param   pInMsg - pointer to the incoming message
    544           * @param   pCBs - pointer to the Application callback
    545           *
    546           * @return  ZStatus_t - status of the command processing              
    547           */
    548          static ZStatus_t zclCC_ProcessInCmd_ResetStartupParamsRsp( zclIncoming_t *pInMsg,
    549                                                                     zclCC_AppCallbacks_t *pCBs )
    550          {
    551            if ( pCBs->pfnReset_StartupParamsRsp )
    552            {
    553              zclCCServerParamsRsp_t rsp;
    554          
    555              rsp.status = pInMsg->pData[0];
    556          
    557              pCBs->pfnReset_StartupParamsRsp( &rsp, &(pInMsg->msg->srcAddr), pInMsg->hdr.transSeqNum );
    558          
    559              return ZSuccess;
    560            }
    561          
    562            return ZFailure; 
    563          }
    564           
    565          /*********************************************************************
    566           * @fn      zclCC_Send_RestartDevice
    567           *
    568           * @brief   Call to send out a Restart Device command
    569           *
    570           * @param   srcEP - Sending application's endpoint
    571           * @param   dstAddr - where you want the message to go
    572           * @param   pCmd - pointer to Restart Command data structure
    573           * @param   disableDefaultRsp - disable default response
    574           * @param   seqNum - ZCL sequence number
    575           *
    576           * @return  ZStatus_t
    577           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    578          ZStatus_t zclCC_Send_RestartDevice( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclCC_Send_RestartDevice:
    579                                              zclCCRestartDevice_t *pCmd, 
    580                                              uint8 disableDefaultRsp, uint8 seqNum )
    581          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 3
   \   000005   74FD         MOV     A,#-0x3
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
   \   00000C   740D         MOV     A,#0xd
   \   00000E   12....       LCALL   ?XSTACK_DISP0_8
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F9           MOV     R1,A
   \   000013   740E         MOV     A,#0xe
   \   000015   12....       LCALL   ?XSTACK_DISP0_8
   \   000018   E0           MOVX    A,@DPTR
   \   000019   FF           MOV     R7,A
    582            uint8 buf[CC_PACKET_LEN_RESTART_DEVICE];
    583            
    584            buf[0] = pCmd->options;
   \   00001A   12....       LCALL   ?Subroutine7 & 0xFFFF
    585            buf[1] = pCmd->delay;
   \                     ??CrossCallReturnLabel_14:
   \   00001D   C0E0         PUSH    A
   \   00001F   7401         MOV     A,#0x1
   \   000021   12....       LCALL   ?XSTACK_DISP0_8
   \   000024   D0E0         POP     A
   \   000026   F0           MOVX    @DPTR,A
    586            buf[2] = pCmd->jitter;
   \   000027   8C82         MOV     DPL,R4
   \   000029   8D83         MOV     DPH,R5
   \   00002B   A3           INC     DPTR
   \   00002C   A3           INC     DPTR
   \   00002D   E0           MOVX    A,@DPTR
   \   00002E   C0E0         PUSH    A
   \   000030   7402         MOV     A,#0x2
   \   000032   12....       LCALL   ?XSTACK_DISP0_8
   \   000035   D0E0         POP     A
   \   000037   12....       LCALL   ?Subroutine9 & 0xFFFF
    587            
    588            return zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_GEN_COMMISSIONING,
    589                                    COMMAND_CC_RESTART_DEVICE, TRUE, 
    590                                    ZCL_FRAME_CLIENT_SERVER_DIR, disableDefaultRsp, 0,
    591                                    seqNum, CC_PACKET_LEN_RESTART_DEVICE, buf );
   \                     ??CrossCallReturnLabel_19:
   \   00003A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00003D   75..03       MOV     ?V0 + 0,#0x3
   \   000040   75..00       MOV     ?V0 + 1,#0x0
   \   000043   78..         MOV     R0,#?V0 + 0
   \   000045   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000048   EF           MOV     A,R7
   \   000049   F5..         MOV     ?V0 + 0,A
   \   00004B   78..         MOV     R0,#?V0 + 0
   \   00004D   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000050   E4           CLR     A
   \   000051   F5..         MOV     ?V0 + 0,A
   \   000053   78..         MOV     R0,#?V0 + 0
   \   000055   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000058   E9           MOV     A,R1
   \   000059   F5..         MOV     ?V0 + 0,A
   \   00005B   78..         MOV     R0,#?V0 + 0
   \   00005D   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000060   75..00       MOV     ?V0 + 0,#0x0
   \   000063   78..         MOV     R0,#?V0 + 0
   \   000065   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000068   75..01       MOV     ?V0 + 0,#0x1
   \   00006B   78..         MOV     R0,#?V0 + 0
   \   00006D   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000070   75..00       MOV     ?V0 + 0,#0x0
   \   000073   78..         MOV     R0,#?V0 + 0
   \   000075   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000078   7C15         MOV     R4,#0x15
   \   00007A   7D00         MOV     R5,#0x0
   \   00007C   EE           MOV     A,R6
   \   00007D   F9           MOV     R1,A
   \   00007E   12....       LCALL   ??zcl_SendCommand?relay
   \   000081   740B         MOV     A,#0xb
   \   000083   12....       LCALL   ?DEALLOC_XSTACK8
   \   000086   7403         MOV     A,#0x3
   \   000088   12....       LCALL   ?DEALLOC_XSTACK8
   \   00008B   7F02         MOV     R7,#0x2
   \   00008D   02....       LJMP    ?BANKED_LEAVE_XDATA
    592          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   F0           MOVX    @DPTR,A
   \   000001                ; Setup parameters for call to function zcl_SendCommand
   \   000001                ; Setup parameters for call to function zcl_SendCommand
   \   000001   85..82       MOV     DPL,?XSP + 0
   \   000004   85..83       MOV     DPH,?XSP + 1
   \   000007   8582..       MOV     ?V0 + 0,DPL
   \   00000A   8583..       MOV     ?V0 + 1,DPH
   \   00000D   78..         MOV     R0,#?V0 + 0
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   8C82         MOV     DPL,R4
   \   000002   8D83         MOV     DPH,R5
   \   000004   E0           MOVX    A,@DPTR
   \   000005   85..82       MOV     DPL,?XSP + 0
   \   000008   85..83       MOV     DPH,?XSP + 1
   \   00000B   F0           MOVX    @DPTR,A
   \   00000C   8C82         MOV     DPL,R4
   \   00000E   8D83         MOV     DPH,R5
   \   000010   A3           INC     DPTR
   \   000011   E0           MOVX    A,@DPTR
   \   000012   22           RET
    593          
    594          /*********************************************************************
    595           * @fn      zclCC_Send_StartupParamsCmd
    596           *
    597           * @brief   Call to send out a Startup parameter command (Restore, Save, Reset)
    598           *
    599           * @param   srcEP - Sending application's endpoint
    600           * @param   dstAddr - where you want the message to go
    601           * @param   pCmd - pointer to Startup Parameter Command data structure
    602           * @param   cmdId - Command type ( Restore, Save or Reset)
    603           * @param   disableDefaultRsp - disable default response
    604           * @param   seqNum - ZCL sequence number
    605           *
    606           * @return  ZStatus_t
    607           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    608          ZStatus_t zclCC_Send_StartupParamsCmd( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclCC_Send_StartupParamsCmd:
    609                                                 zclCCStartupParams_t *pCmd, uint8 cmdId,
    610                                                 uint8 disableDefaultRsp, uint8 seqNum )
    611          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
   \   00000C   740D         MOV     A,#0xd
   \   00000E   12....       LCALL   ?XSTACK_DISP0_8
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F9           MOV     R1,A
   \   000013   740E         MOV     A,#0xe
   \   000015   12....       LCALL   ?XSTACK_DISP0_8
   \   000018   E0           MOVX    A,@DPTR
   \   000019   FF           MOV     R7,A
   \   00001A   740F         MOV     A,#0xf
   \   00001C   12....       LCALL   ?XSTACK_DISP0_8
   \   00001F   E0           MOVX    A,@DPTR
   \   000020   F5..         MOV     ?V0 + 2,A
    612            uint8 buf[CC_PACKET_LEN_STARTUP_PARAMS_CMD];
    613            
    614            buf[0] = pCmd->options;
   \   000022   12....       LCALL   ?Subroutine7 & 0xFFFF
    615            buf[1] = pCmd->index;
   \                     ??CrossCallReturnLabel_15:
   \   000025   C0E0         PUSH    A
   \   000027   7401         MOV     A,#0x1
   \   000029   12....       LCALL   ?XSTACK_DISP0_8
   \   00002C   D0E0         POP     A
   \   00002E   12....       LCALL   ?Subroutine9 & 0xFFFF
    616            
    617            return zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_GEN_COMMISSIONING,
    618                                    cmdId, TRUE, ZCL_FRAME_CLIENT_SERVER_DIR,
    619                                    disableDefaultRsp, 0, seqNum, 
    620                                    CC_PACKET_LEN_STARTUP_PARAMS_CMD, buf );
   \                     ??CrossCallReturnLabel_20:
   \   000031   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000034   75..02       MOV     ?V0 + 0,#0x2
   \   000037   75..00       MOV     ?V0 + 1,#0x0
   \   00003A   78..         MOV     R0,#?V0 + 0
   \   00003C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00003F   E5..         MOV     A,?V0 + 2
   \   000041   F5..         MOV     ?V0 + 0,A
   \   000043   78..         MOV     R0,#?V0 + 0
   \   000045   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000048   E4           CLR     A
   \   000049   F5..         MOV     ?V0 + 0,A
   \   00004B   78..         MOV     R0,#?V0 + 0
   \   00004D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000050   EF           MOV     A,R7
   \   000051   F5..         MOV     ?V0 + 0,A
   \   000053   78..         MOV     R0,#?V0 + 0
   \   000055   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000058   75..00       MOV     ?V0 + 0,#0x0
   \   00005B   78..         MOV     R0,#?V0 + 0
   \   00005D   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000060   75..01       MOV     ?V0 + 0,#0x1
   \   000063   78..         MOV     R0,#?V0 + 0
   \   000065   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000068   E9           MOV     A,R1
   \   000069   F5..         MOV     ?V0 + 0,A
   \   00006B   78..         MOV     R0,#?V0 + 0
   \   00006D   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000070   7C15         MOV     R4,#0x15
   \   000072   7D00         MOV     R5,#0x0
   \   000074   EE           MOV     A,R6
   \   000075   F9           MOV     R1,A
   \   000076   12....       LCALL   ??zcl_SendCommand?relay
   \   000079   740B         MOV     A,#0xb
   \   00007B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00007E   7402         MOV     A,#0x2
   \   000080                REQUIRE ?Subroutine0
   \   000080                ; // Fall through to label ?Subroutine0
    621          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F03         MOV     R7,#0x3
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA
    622          
    623          /*********************************************************************
    624           * @fn      zclCC_Send_ServerParamsRsp
    625           *
    626           * @brief   Call to send out a Server Parameters Response to a client request
    627           *
    628           * @param   srcEP - Sending application's endpoint
    629           * @param   dstAddr - where you want the message to go
    630           * @param   pRsp - pointer to Startup Parameter Response data structure
    631           * @param   cmdId - Command type ( Restore, Save or Reset)
    632           * @param   disableDefaultRsp - disable default response
    633           * @param   seqNum - ZCL sequence number
    634           *
    635           * @return  ZStatus_t
    636           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    637          ZStatus_t zclCC_Send_ServerParamsRsp( uint8 srcEP, afAddrType_t *dstAddr,
   \                     zclCC_Send_ServerParamsRsp:
    638                                                zclCCServerParamsRsp_t *pRsp, uint8 cmdId,
    639                                                uint8 disableDefaultRsp, uint8 seqNum )
    640          { 
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
   \   000007   740B         MOV     A,#0xb
   \   000009   12....       LCALL   ?XSTACK_DISP0_8
   \   00000C   E0           MOVX    A,@DPTR
   \   00000D   F9           MOV     R1,A
   \   00000E   740C         MOV     A,#0xc
   \   000010   12....       LCALL   ?XSTACK_DISP0_8
   \   000013   E0           MOVX    A,@DPTR
   \   000014   FF           MOV     R7,A
   \   000015   740D         MOV     A,#0xd
   \   000017   12....       LCALL   ?XSTACK_DISP0_8
   \   00001A   E0           MOVX    A,@DPTR
   \   00001B   F5..         MOV     ?V0 + 2,A
    641            return zcl_SendCommand( srcEP, dstAddr, ZCL_CLUSTER_ID_GEN_COMMISSIONING,
    642                                    cmdId, TRUE, ZCL_FRAME_SERVER_CLIENT_DIR,
    643                                    disableDefaultRsp, 0, seqNum, 
    644                                    CC_PACKET_LEN_SERVER_RSP, &(pRsp->status) );
   \   00001D                ; Setup parameters for call to function zcl_SendCommand
   \   00001D   8C..         MOV     ?V0 + 0,R4
   \   00001F   8D..         MOV     ?V0 + 1,R5
   \   000021   78..         MOV     R0,#?V0 + 0
   \   000023   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000026   75..01       MOV     ?V0 + 0,#0x1
   \   000029   75..00       MOV     ?V0 + 1,#0x0
   \   00002C   78..         MOV     R0,#?V0 + 0
   \   00002E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000031   E5..         MOV     A,?V0 + 2
   \   000033   F5..         MOV     ?V0 + 0,A
   \   000035   78..         MOV     R0,#?V0 + 0
   \   000037   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00003A   E4           CLR     A
   \   00003B   F5..         MOV     ?V0 + 0,A
   \   00003D   78..         MOV     R0,#?V0 + 0
   \   00003F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000042   EF           MOV     A,R7
   \   000043   F5..         MOV     ?V0 + 0,A
   \   000045   78..         MOV     R0,#?V0 + 0
   \   000047   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00004A   75..01       MOV     ?V0 + 0,#0x1
   \   00004D   78..         MOV     R0,#?V0 + 0
   \   00004F   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000052   78..         MOV     R0,#?V0 + 0
   \   000054   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000057   E9           MOV     A,R1
   \   000058   F5..         MOV     ?V0 + 0,A
   \   00005A   78..         MOV     R0,#?V0 + 0
   \   00005C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00005F   7C15         MOV     R4,#0x15
   \   000061   7D00         MOV     R5,#0x0
   \   000063   EE           MOV     A,R6
   \   000064   F9           MOV     R1,A
   \   000065   12....       LCALL   ??zcl_SendCommand?relay
   \   000068   740B         MOV     A,#0xb
   \   00006A   02....       LJMP    ?Subroutine0 & 0xFFFF
    645          }

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclCC_RegisterCmdCallbacks?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclCC_RegisterCmdCallbacks

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclCC_HdlIncoming?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclCC_HdlIncoming

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclCC_HdlInSpecificCommands?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclCC_HdlInSpecificCommands

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclCC_Send_RestartDevice?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclCC_Send_RestartDevice

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclCC_Send_StartupParamsCmd?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclCC_Send_StartupParamsCmd

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclCC_Send_ServerParamsRsp?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclCC_Send_ServerParamsRsp
    646          
    647          
    648          /********************************************************************************************
    649          *********************************************************************************************/

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     zclCC_HdlInSpecificCommands        1      0     15
     zclCC_HdlIncoming                  2      0      0
       -> zclCC_HdlInSpecificCommands
                                        4      0      0
     zclCC_RegisterCmdCallbacks         1      0     14
       -> zcl_registerPlugin            0      0     28
       -> osal_mem_alloc                0      0     24
     zclCC_Send_RestartDevice           1      0     26
       -> zcl_SendCommand               0      0     48
     zclCC_Send_ServerParamsRsp         0      0     25
       -> zcl_SendCommand               0      0     44
     zclCC_Send_StartupParamsCmd        1      0     27
       -> zcl_SendCommand               0      0     48


   Segment part sizes:

     Function/Label                      Bytes
     --------------                      -----
     zclCCCBs                               2
     zclCCPluginRegisted                    1
     zclCC_RegisterCmdCallbacks           149
     ?Subroutine10                          6
     zclCC_HdlIncoming                     42
     zclCC_HdlInSpecificCommands          487
     ?Subroutine8                           4
     ?Subroutine14                          4
     ?Subroutine16                          9
     ?Subroutine6                          11
     ?Subroutine5                          16
     ?Subroutine13                         10
     ?Subroutine4                           6
     ?Subroutine12                          4
     ?Subroutine15                         27
     ?Subroutine3                           2
     ??Subroutine17_0                       2
     ??Subroutine18_0                       2
     ??Subroutine19_0                       2
     ??Subroutine20_0                       8
     ?Subroutine2                           5
     ?Subroutine1                           8
     ?Subroutine11                         36
     zclCC_Send_RestartDevice             144
     ?Subroutine9                          16
     ?Subroutine7                          19
     zclCC_Send_StartupParamsCmd          128
     ?Subroutine0                           8
     zclCC_Send_ServerParamsRsp           109
     ??zclCC_RegisterCmdCallbacks?relay     6
     ??zclCC_HdlIncoming?relay              6
     ??zclCC_HdlInSpecificCommands?relay    6
     ??zclCC_Send_RestartDevice?relay       6
     ??zclCC_Send_StartupParamsCmd?relay    6
     ??zclCC_Send_ServerParamsRsp?relay     6

 
 1 264 bytes in segment BANKED_CODE
    36 bytes in segment BANK_RELAYS
     3 bytes in segment XDATA_Z
 
 1 300 bytes of CODE  memory
     3 bytes of XDATA memory

Errors: none
Warnings: none
